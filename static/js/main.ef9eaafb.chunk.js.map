{"version":3,"sources":["utils/auth.js","utils/google-api.js","utils/sheets-api.js","utils/date_time.js","utils/hours.js","components/Icons.js","components/SheetList/SheetListItem.js","components/SheetList/SheetListPresenter.js","components/SheetList/index.js","components/Dashboard/HoursSheetButton.js","components/Dashboard/CurrentWeekProgress.js","components/Dashboard/WeekDaysTable.js","components/Dashboard/WeekNavigation.js","components/Dashboard/DashboardPresenter.js","components/Spinner.js","components/Dashboard/index.js","components/GoogleAuth/index.js","components/Navbar/index.js","App.js","serviceWorker.js","index.js"],"names":["initialState","error","isLoggedIn","isPending","user","reducer","state","action","type","Error","AuthContext","React","createContext","AuthProvider","props","useReducer","dispatch","Provider","value","useAuthContext","useContext","GOOGLE_API_KEY","config","GOOGLE_CLIENT_ID","GOOGLE_SHEETS_READY_ONLY_SCOPE","GOOGLE_DRIVE_METADATA_READ_ONLY_SCOPE","DISCOVERY_DOCS","getAuth","window","gapi","auth2","getAuthInstance","sheets","hoursLoadedAt","Date","parseInt","localStorage","getItem","date","setItem","getTime","fetchAllSheets","Promise","resolve","reject","client","drive","files","list","fields","q","then","response","result","length","setHoursSheetId","sheetId","JSON","stringify","find","sheet","id","getHoursSheet","hoursSheetJson","parse","getHoursSheetId","hoursSheetData","convertDateSerialNumberToDate","serialNumber","epochSeconds","setTime","setMinutes","getTimezoneOffset","getMinutes","buildHoursItemFromRow","row","hoursItem","timestamp","parseFloat","startDateTime","endDateTime","notes","trim","fetchHours","CACHE_SECONDS","map","item","params","spreadsheetId","range","valueRenderOption","dateTimeRenderOption","spreadsheets","values","get","hours","slice","convert_ms_to_hours","ms","day_of_week","date_index","getDay","first_day_of_week","setMilliseconds","setSeconds","setHours","setDate","getDate","subtract_days","days","add_days","create_hours","first_week_at_date","sheets_api","sheetsApi","week_cursor","is_hours_data_loaded","hours_data","totals","currentWeek","currentDay","previousWeek","sunday","monday","tuesday","wednesday","thursday","friday","saturday","get_hours_for_week","forEach","hoursWorked","reduce","beginDate","endDate","filter","Object","freeze","isLoaded","load","data","push","earliest","find_earliest","catch","console","next","next_week_at","now","previous","prev_week_at","set_week","ExternalLinkIcon","icon","faExternalLinkAlt","AngleIcon","direction","faAngleRight","faAngleLeft","SheetListItem","name","onClick","className","src","aria-hidden","alt","href","aria-label","target","rel","SheetListPresenter","onSheetSelect","key","SheetList","useState","googleSheets","setGoogleSheets","useEffect","a","async","HoursSheetButton","CurrentWeekProgress","min","max","percentOfGoal","style","maxWidth","width","role","aria-valuenow","toFixed","aria-valuemin","aria-valuemax","Row","header","isToday","WeekDaysTable","tableData","rowData","NavButton","cursor","NextWeekButton","PrevWeekButton","daysOfTheWeek","DashboardPresenter","firstDay","isFirstWeek","onPreviousWeek","onNextWeek","hoursWorkedThisWeek","dayOfWeek","lastDay","is_present_week","day","toLocaleDateString","Spinner","height","Container","children","Dashboard","auth","hoursSheet","setHoursSheet","setTotals","setFirstDay","setIsFirstWeek","firstDayOfPrevWeek","newTotals","undefined","firstDayOfNextWeek","GoogleAuth","isGapiClientLoaded","onAuthChange","isSignedIn","gapiAuth","currentUser","listen","message","signIn","disabled","signOut","Navbar","App","setIsGapiClientLoaded","gapiError","setGapiError","init","clientId","scope","join","discoveryDocs","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ef9eaafb.chunk.js","sourcesContent":["import React, { useReducer, useContext } from \"react\";\n\nexport const ERROR = \"ERROR\";\nexport const LOGOUT = \"LOGOUT\";\nexport const PENDING = \"PENDING\";\nexport const SUCCESS = \"SUCCESS\";\n\nconst initialState = {\n  error: null,\n  isLoggedIn: false,\n  isPending: false,\n  user: null\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case ERROR:\n      return {\n        ...state,\n        error: action.error,\n        isPending: false\n      };\n    case LOGOUT:\n      return {\n        ...state,\n        isLoggedIn: false,\n        isPending: false,\n        user: null\n      };\n    case PENDING:\n      return {\n        ...state,\n        isPending: true\n      };\n    case SUCCESS:\n      return {\n        ...state,\n        isLoggedIn: true,\n        isPending: false,\n        user: action.user\n      };\n    default:\n      throw new Error(`Invalid action type: ${action.type}`);\n  }\n};\n\nconst AuthContext = React.createContext([]);\n\nexport const AuthProvider = props => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n  return (\n    <AuthContext.Provider\n      value={[state, dispatch]}\n      {...props}\n    />\n  );\n};\n\nexport const useAuthContext = () => useContext(AuthContext);\n","import config from \"../config.json\";\n\nconst { GOOGLE_API_KEY, GOOGLE_CLIENT_ID } = config;\n\nconst GOOGLE_SHEETS_READY_ONLY_SCOPE =\n  \"https://www.googleapis.com/auth/spreadsheets.readonly\";\nconst GOOGLE_DRIVE_METADATA_READ_ONLY_SCOPE =\n  \"https://www.googleapis.com/auth/drive.metadata.readonly\";\nconst DISCOVERY_DOCS = [\n  \"https://sheets.googleapis.com/$discovery/rest?version=v4\",\n  \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"\n];\n\n// Returns a promise which resolves after google client lib is loaded with the specified scopes\n// Rejects if client fails to initialize with error from google api\nexport const loadClientWithAuth = async () => {\n  return new Promise((resolve, reject) => {\n    const initGapiClient = async () => {\n      try {\n        await window.gapi.client.init({\n          clientId: GOOGLE_CLIENT_ID,\n          GOOGLE_API_KEY: GOOGLE_API_KEY,\n          scope: [\n            GOOGLE_SHEETS_READY_ONLY_SCOPE,\n            GOOGLE_DRIVE_METADATA_READ_ONLY_SCOPE\n          ].join(\" \"),\n          discoveryDocs: DISCOVERY_DOCS\n        });\n        resolve();\n      } catch (error) {\n        reject(error);\n      }\n    };\n    window.gapi.load(\"client:auth2\", initGapiClient);\n  });\n};\n\nexport const getAuth = () => window.gapi.auth2.getAuthInstance();\n","let sheets = [];\n\nconst hoursLoadedAt = {\n  get: () => new Date(parseInt(localStorage.getItem(\"hours-data-loaded-at\"))),\n  set: date => localStorage.setItem(\"hours-data-loaded-at\", date.getTime())\n};\n\nexport const fetchAllSheets = () => {\n  return new Promise((resolve, reject) => {\n    const handleListFilesResponse = response => {\n      const { files } = response.result;\n      if (!files || files.length < 1) {\n        return reject(new Error(\"No Google Sheets!\"));\n      }\n      sheets = files;\n      resolve(files);\n    };\n\n    window.gapi.client.drive.files\n      .list({\n        fields: \"nextPageToken, files(id, name, webViewLink, iconLink)\",\n        q: 'mimeType=\"application/vnd.google-apps.spreadsheet\"'\n      })\n      .then(handleListFilesResponse, reject);\n  });\n};\n\nexport const setHoursSheetId = sheetId =>\n  localStorage.setItem(\n    \"hours-sheet\",\n    JSON.stringify(sheets.find(sheet => sheet.id === sheetId))\n  );\n\nexport const getHoursSheet = () => {\n  try {\n    const hoursSheetJson = window.localStorage.getItem(\"hours-sheet\");\n    return hoursSheetJson && JSON.parse(hoursSheetJson);\n  } catch (error) {\n    return null;\n  }\n};\n\nexport const getHoursSheetId = () => {\n  const hoursSheetData = getHoursSheet();\n  return hoursSheetData && hoursSheetData.id;\n};\n\nconst convertDateSerialNumberToDate = serialNumber => {\n  const SECONDS_PER_DAY = 86400;\n  // Conversion: Jan 1, 1970 - Dec 30, 1899\n  const CONVERSION_SECONDS = -2209161600;\n  const epochSeconds = serialNumber * SECONDS_PER_DAY + CONVERSION_SECONDS;\n  const result = new Date();\n  result.setTime(epochSeconds * 1000);\n\n  // make time zone correction (serial numbers are stored in local time without\n  // the time zone)\n  result.setMinutes(result.getTimezoneOffset() + result.getMinutes());\n\n  return result;\n};\n\nconst buildHoursItemFromRow = row => {\n  const hoursItem = {};\n\n  hoursItem.timestamp = convertDateSerialNumberToDate(parseFloat(row[0]));\n  hoursItem.startDateTime = convertDateSerialNumberToDate(\n    parseFloat(row[1]) + parseFloat(row[2])\n  );\n  hoursItem.endDateTime = convertDateSerialNumberToDate(\n    parseFloat(row[1]) + parseFloat(row[3])\n  );\n  hoursItem.notes = row[4].trim();\n  return hoursItem;\n};\n\nconst useCachedHours = () => {\n  const CACHE_SECONDS = 60;\n  const timeSinceHoursLoaded =\n    new Date().getTime() - hoursLoadedAt.get().getTime();\n  return timeSinceHoursLoaded < CACHE_SECONDS * 1000;\n};\n\nexport const fetchHours = () => {\n  // google uses non-standard promises\n  return new Promise((resolve, reject) => {\n    if (useCachedHours()) {\n      resolve(\n        JSON.parse(localStorage.getItem(\"hours-data\")).map(item => ({\n          ...item,\n          timestamp: new Date(item.timestamp),\n          startDateTime: new Date(item.startDateTime),\n          endDateTime: new Date(item.endDateTime)\n        }))\n      );\n      return;\n    }\n    const params = {\n      spreadsheetId: getHoursSheetId(),\n      range: \"A:E\",\n      valueRenderOption: \"UNFORMATTED_VALUE\",\n      dateTimeRenderOption: \"SERIAL_NUMBER\"\n    };\n    window.gapi.client.sheets.spreadsheets.values.get(params).then(response => {\n      // skip header row\n      const hours = response.result.values.slice(1).map(buildHoursItemFromRow);\n      hoursLoadedAt.set(new Date());\n      localStorage.setItem(\"hours-data\", JSON.stringify(hours));\n      resolve(hours);\n    }, reject);\n  });\n};\n","export const convert_ms_to_hours = (ms) => ms / (1000 * 60 * 60);\n\nexport const day_of_week = (date_index) => {\n  return [\n    \"sunday\",\n    \"monday\",\n    \"tuesday\",\n    \"wednesday\",\n    \"thursday\",\n    \"friday\",\n    \"saturday\",\n  ][date_index.getDay()];\n};\n\nexport const first_day_of_week = (date) => {\n  const result = new Date(date.getTime());\n  result.setMilliseconds(0);\n  result.setSeconds(0);\n  result.setMinutes(0);\n  result.setHours(0);\n  result.setDate(result.getDate() - result.getDay());\n  return result;\n};\n\nexport const subtract_days = (date, days) => {\n  return add_days(date, -days);\n};\n\nexport const add_days = (date, days) => {\n  const result = new Date(date.getTime());\n  result.setDate(result.getDate() + days);\n  return result;\n};\n","import {\n  day_of_week,\n  convert_ms_to_hours,\n  first_day_of_week,\n  subtract_days,\n  add_days,\n} from \"./date_time\";\n\nfunction find_earliest(hours_data) {\n  return hours_data.reduce((earliest, item) =>\n    item.startDateTime < earliest.startDateTime ? item : earliest\n  );\n}\n\nexport const create_hours = ({ sheetsApi: sheets_api }) => {\n  let week_cursor = first_day_of_week(new Date());\n  let is_hours_data_loaded = false;\n  let first_week_at_date;\n  const hours_data = [];\n\n  function load() {\n    return sheets_api\n      .fetchHours()\n      .then((data) => {\n        is_hours_data_loaded = true;\n        hours_data.push(...data);\n        if (data.length > 0) {\n          first_week_at_date = first_day_of_week(\n            find_earliest(hours_data).startDateTime\n          );\n        }\n      })\n      .catch(console.error);\n  }\n\n  function is_loaded() {\n    return is_hours_data_loaded;\n  }\n\n  function totals() {\n    const result = {\n      currentWeek: { hours: 0 },\n      currentDay: { hours: 0 },\n      previousWeek: { hours: 0 },\n      sunday: { hours: 0 },\n      monday: { hours: 0 },\n      tuesday: { hours: 0 },\n      wednesday: { hours: 0 },\n      thursday: { hours: 0 },\n      friday: { hours: 0 },\n      saturday: { hours: 0 },\n    };\n\n    current_week_data().forEach(({ startDateTime, endDateTime }) => {\n      const hoursWorked = convert_ms_to_hours(endDateTime - startDateTime);\n      result[day_of_week(startDateTime)].hours += hoursWorked;\n      result.currentWeek.hours += hoursWorked;\n    });\n\n    result.previousWeek.hours = previous_week_data().reduce(\n      (hours, { startDateTime, endDateTime }) => {\n        return hours + convert_ms_to_hours(endDateTime - startDateTime);\n      },\n      0\n    );\n\n    result.currentDay.hours = result[day_of_week(new Date())].hours;\n    return result;\n  }\n\n  function current_week_data() {\n    return get_hours_for_week(week_cursor);\n  }\n\n  function previous_week_data() {\n    const previousWeekBeginDate = subtract_days(week_cursor, 7);\n    return get_hours_for_week(previousWeekBeginDate);\n  }\n\n  function get_hours_for_week(beginDate) {\n    const endDate = new Date(beginDate.getTime());\n    endDate.setDate(beginDate.getDate() + 7);\n    return hours_data.filter(\n      ({ startDateTime }) =>\n        startDateTime >= beginDate && startDateTime < endDate\n    );\n  }\n\n  function set_week(date) {\n    week_cursor = first_day_of_week(date);\n  }\n\n  function previous() {\n    const prev_week_at = subtract_days(week_cursor, 7) \n    if (prev_week_at < first_week_at_date) {\n      return;\n    }\n    week_cursor = prev_week_at;\n    return totals();\n  }\n\n  function next() {\n    const next_week_at = add_days(week_cursor, 7)\n    if (Date.now() < next_week_at.getTime()) {\n      return;\n    }\n    week_cursor = next_week_at;\n    return totals();\n  }\n\n  return Object.freeze({\n    isLoaded: is_loaded,\n    load,\n    next,\n    previous,\n    set_week,\n    totals,\n  });\n};\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faExternalLinkAlt,\n  faAngleRight,\n  faAngleLeft,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nexport const ExternalLinkIcon = (props) => (\n  <FontAwesomeIcon {...props} icon={faExternalLinkAlt} />\n);\n\nexport const AngleIcon = ({ direction, props }) => (\n  <FontAwesomeIcon\n    {...props}\n    icon={direction === \"right\" ? faAngleRight : faAngleLeft}\n  />\n);\n","import React from \"react\";\nimport { ExternalLinkIcon } from \"../Icons\";\n\nconst SheetListItem = ({ name, id, onClick }) => {\n  return (\n    <button\n      className=\"list-group-item list-group-item-action h6\"\n      type=\"button\"\n      onClick={onClick}\n    >\n      <img\n        src=\"https://drive-thirdparty.googleusercontent.com/16/type/application/vnd.google-apps.spreadsheet\"\n        aria-hidden=\"true\"\n        className=\"mr-2\"\n        alt=\"\"\n      />\n      {name}\n      <a\n        className=\"web-view-link pl-2\"\n        href={`https://docs.google.com/spreadsheets/d/${id}/edit?usp=drivesdk`}\n        aria-label=\"Open sheet in new tab\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <ExternalLinkIcon />\n      </a>\n    </button>\n  );\n};\n\nexport default SheetListItem;\n","import React from \"react\";\nimport SheetListItem from \"./SheetListItem\";\n\nconst SheetListPresenter = ({ sheets, onSheetSelect }) => {\n  return (\n    <div className=\"list-group list-group-flush\">\n      {sheets.map(sheet => (\n        <SheetListItem\n          key={sheet.id}\n          {...sheet}\n          onClick={() => onSheetSelect(sheet.id)}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default SheetListPresenter;\n","import React, { useState, useEffect } from \"react\";\nimport SheetListPresenter from \"./SheetListPresenter\";\nimport { fetchAllSheets } from \"../../utils/sheets-api\";\n\nconst SheetList = ({ onSheetSelect }) => {\n  const [googleSheets, setGoogleSheets] = useState([]);\n  useEffect(() => {\n    (async () => {\n      const result = await fetchAllSheets();\n      setGoogleSheets(result);\n    })();\n  }, []);\n  return (\n    <SheetListPresenter onSheetSelect={onSheetSelect} sheets={googleSheets} />\n  );\n};\n\nexport default SheetList;\n","import React from \"react\";\nimport { ExternalLinkIcon } from \"../Icons\";\n\nconst HoursSheetButton = ({ sheetId }) => (\n  <a\n    href={`https://docs.google.com/spreadsheets/d/${sheetId}/edit?usp=drivesdk`}\n    id=\"external-link-hours-sheet\"\n    className=\"btn btn-secondary\"\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n  >\n    View Hours Sheet <ExternalLinkIcon />\n  </a>\n);\n\nexport default HoursSheetButton;\n","import React from \"react\";\n\nconst CurrentWeekProgress = ({ value = 0, min = 0, max = 100 }) => {\n  const percentOfGoal = ((value - min) * 100) / (max - min);\n  return (\n    <div className=\"progress\" style={{ maxWidth: 400 }}>\n      <div\n        style={{ width: `${percentOfGoal}%` }}\n        className=\"progress-bar\"\n        role=\"progressbar\"\n        aria-valuenow={value.toFixed(1)}\n        aria-valuemin={min.toFixed()}\n        aria-valuemax={max.toFixed()}\n      >\n        {value.toFixed(1)} / {max.toFixed()}\n      </div>\n    </div>\n  );\n};\n\nexport default CurrentWeekProgress;\n","import React from \"react\";\n\nconst Row = ({ header, data, isToday }) => {\n  return (\n    <tr className={isToday ? \"table-primary\" : \"\"}>\n      <th className=\"text-capitalize\">\n        {header}{\" \"}\n        {isToday && <span className=\"ml-2 badge badge-primary\">Today!</span>}\n      </th>\n      <td>{data}</td>\n    </tr>\n  );\n};\n\nconst WeekDaysTable = ({ tableData = [] }) => (\n  <table className=\"table mt-5\" style={{ maxWidth: 400 }}>\n    <tbody>\n      {tableData.map(rowData => (\n        <Row key={rowData.header} {...rowData} />\n      ))}\n    </tbody>\n  </table>\n);\n\nexport default WeekDaysTable;\n","import React from \"react\";\nimport { AngleIcon } from \"../Icons\";\n\nconst NavButton = (props) => (\n  <span role=\"button\" style={{ cursor: \"pointer\" }} {...props} />\n);\n\nexport const NextWeekButton = ({ onClick }) => (\n  <NavButton onClick={onClick}>\n    <AngleIcon direction=\"right\" />\n  </NavButton>\n);\n\nexport const PrevWeekButton = ({ onClick }) => (\n  <NavButton onClick={onClick}>\n    <AngleIcon direction=\"left\" />\n  </NavButton>\n);\n","import React from \"react\";\nimport HoursSheetButton from \"./HoursSheetButton\";\nimport CurrentWeekProgress from \"./CurrentWeekProgress\";\nimport WeekDaysTable from \"./WeekDaysTable\";\nimport { add_days } from \"../../utils/date_time\";\nimport { PrevWeekButton, NextWeekButton } from \"./WeekNavigation\";\n\nconst daysOfTheWeek = [\n  \"sunday\",\n  \"monday\",\n  \"tuesday\",\n  \"wednesday\",\n  \"thursday\",\n  \"friday\",\n  \"saturday\",\n];\n\nconst DashboardPresenter = ({\n  sheetId,\n  currentWeek,\n  previousWeek,\n  currentDay,\n  firstDay,\n  isFirstWeek,\n  onPreviousWeek,\n  onNextWeek,\n  ...days\n}) => {\n  const goalHoursWorkedThisWeek = 40;\n  const hoursWorkedThisWeek = currentWeek.hours;\n  const dayOfWeek = daysOfTheWeek[new Date().getDay()];\n  const lastDay = add_days(firstDay, 7);\n  const is_present_week =\n    Date.now() > firstDay.getTime() && Date.now() < add_days(lastDay, 1);\n  const tableData = daysOfTheWeek.map((day) => ({\n    header: day,\n    data: days[day].hours.toFixed(2),\n    isToday: day === dayOfWeek && is_present_week,\n  }));\n\n  return (\n    <>\n      <HoursSheetButton sheetId={sheetId} />\n      <div className=\"mt-5\">\n        <h2 className=\"h5 pt-3 text-dark\">\n          {isFirstWeek || <PrevWeekButton onClick={onPreviousWeek} />}\n          <span className=\"px-3\">\n            {firstDay.toLocaleDateString()} - {lastDay.toLocaleDateString()}\n          </span>\n          {is_present_week || <NextWeekButton onClick={onNextWeek} />}\n        </h2>\n        <CurrentWeekProgress\n          value={hoursWorkedThisWeek}\n          max={goalHoursWorkedThisWeek}\n        />\n      </div>\n      <WeekDaysTable tableData={tableData} />\n    </>\n  );\n};\n\nexport default DashboardPresenter;\n","import React from \"react\";\n\nconst Spinner = () => {\n  return (\n    <div className=\"vh-100 d-flex justify-content-center align-items-center\">\n      <div\n        style={{ width: \"5rem\", height: \"5rem\" }}\n        className=\"spinner-border\"\n        role=\"status\"\n      >\n        <span className=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n  );\n};\n\nexport default Spinner;\n","import React, { useState, useEffect } from \"react\";\nimport { getHoursSheet, setHoursSheetId } from \"../../utils/sheets-api\";\nimport { useAuthContext } from \"../../utils/auth\";\nimport SheetList from \"../SheetList\";\nimport DashboardPresenter from \"./DashboardPresenter\";\nimport Spinner from \"../Spinner\";\nimport { first_day_of_week, add_days, subtract_days } from \"../../utils/date_time\";\n\nconst Container = ({ children }) => (\n  <div className=\"container mt-3\">{children}</div>\n);\n\nconst Dashboard = ({ hours }) => {\n  const [auth] = useAuthContext();\n  const [hoursSheet, setHoursSheet] = useState(getHoursSheet());\n  const [totals, setTotals] = useState()\n  const [firstDay, setFirstDay] = useState(first_day_of_week(new Date()));\n  const [isFirstWeek, setIsFirstWeek] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      if (hoursSheet) {\n        await hours.load();\n      }\n      if (hours.isLoaded()) {\n        setTotals(hours.totals())\n      }\n    })();\n  }, [hoursSheet, hours]);\n\n  const handleSheetSelect = (sheetId) => {\n    setHoursSheetId(sheetId);\n    setHoursSheet(getHoursSheet());\n  };\n\n  const handlePreviousWeek = () => {\n    const firstDayOfPrevWeek = subtract_days(firstDay, 7);\n    const newTotals = hours.previous();\n    if (newTotals === undefined) {\n      setIsFirstWeek(true);\n      return;\n    }\n    setIsFirstWeek(false);\n    setFirstDay(firstDayOfPrevWeek);\n    setTotals(newTotals);\n  }\n\n  const handleNextWeek = () => {\n    const firstDayOfNextWeek = add_days(firstDay, 7);\n    const newTotals = hours.next();\n    setIsFirstWeek(false);\n    if (newTotals === undefined) {\n      return;\n    }\n    setFirstDay(firstDayOfNextWeek);\n    setTotals(newTotals);\n  }\n\n  if (!auth.isLoggedIn) {\n    return <Container>Please log in.</Container>;\n  }\n\n  if (totals) {\n    return (\n      <Container>\n        <DashboardPresenter\n          sheetId={hoursSheet.id}\n          firstDay={firstDay}\n          isFirstWeek={isFirstWeek}\n          onPreviousWeek={handlePreviousWeek}\n          onNextWeek={handleNextWeek}\n          {...totals}\n        />\n      </Container>\n    );\n  }\n\n  if (hoursSheet) {\n    return <Spinner />;\n  }\n\n  return (\n    <Container>\n      <SheetList onSheetSelect={handleSheetSelect} />\n    </Container>\n  );\n};\n\nexport default Dashboard;\n","import React, { useEffect } from \"react\";\nimport {\n  useAuthContext,\n  ERROR,\n  PENDING,\n  SUCCESS,\n  LOGOUT\n} from \"../../utils/auth\";\nimport { getAuth as gapiAuth } from \"../../utils/google-api\";\n\nconst GoogleAuth = ({ isGapiClientLoaded }) => {\n  const [state, dispatch] = useAuthContext();\n\n  useEffect(() => {\n    dispatch({ type: PENDING });\n    if (!isGapiClientLoaded) {\n      // remain in pending state until google api client has loaded in\n      return;\n    }\n    const onAuthChange = isSignedIn => {\n      if (isSignedIn) {\n        dispatch({\n          type: SUCCESS,\n          user: gapiAuth().currentUser.get()\n        });\n      } else {\n        dispatch({ type: LOGOUT });\n      }\n    };\n    try {\n      const auth = gapiAuth();\n      auth.isSignedIn.listen(onAuthChange);\n      onAuthChange(auth.isSignedIn.get());\n    } catch (error) {\n      dispatch({ type: ERROR, error: error.message });\n    }\n  }, [dispatch, isGapiClientLoaded]);\n\n  if (state.isPending) {\n    return (\n      <button\n        onClick={() => gapiAuth().signIn()}\n        className=\"btn btn-outline-primary ml-auto my-2 my-sm-0\"\n        disabled\n      >\n        <span\n          className=\"spinner-border spinner-border-sm\"\n          role=\"status\"\n          aria-hidden=\"true\"\n        />{\" \"}\n        Loading...\n      </button>\n    );\n  }\n  if (state.isLoggedIn) {\n    return (\n      <button\n        onClick={() => gapiAuth().signOut()}\n        className=\"btn btn-outline-danger ml-auto my-2 my-sm-0\"\n      >\n        Sign Out\n      </button>\n    );\n  }\n  return (\n    <button\n      onClick={() => gapiAuth().signIn()}\n      className=\"btn btn-outline-primary ml-auto my-2 my-sm-0\"\n    >\n      Sign In with Google\n    </button>\n  );\n};\n\nexport default GoogleAuth;\n","import React from \"react\";\nimport GoogleAuth from \"../GoogleAuth\";\n\nconst Navbar = ({isGapiClientLoaded}) => {\n  return (\n    <nav className=\"navbar navbar-expand-md navbar-dark bg-dark\">\n      <a className=\"navbar-brand\" href=\"./index.html\">\n        My Hours Summary\n      </a>{\" \"}\n      <GoogleAuth isGapiClientLoaded={isGapiClientLoaded} />\n    </nav>\n  );\n};\n\nexport default Navbar;\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { AuthProvider } from \"./utils/auth\";\nimport * as gapi from \"./utils/google-api\";\nimport * as sheetsApi from \"./utils/sheets-api\";\nimport { create_hours } from \"./utils/hours\";\nimport Dashboard from \"./components/Dashboard\";\nimport Navbar from \"./components/Navbar\";\nimport Spinner from \"./components/Spinner\";\n\nfunction App() {\n  const [isGapiClientLoaded, setIsGapiClientLoaded] = useState(false);\n  const [gapiError, setGapiError] = useState(null);\n  useEffect(() => {\n    gapi\n      .loadClientWithAuth()\n      .then(() => setIsGapiClientLoaded(true))\n      .catch(error => {\n        setIsGapiClientLoaded(false);\n        setGapiError(error);\n      });\n  }, []);\n\n  if (gapiError) {\n    return (\n      <div className=\"vh-100 d-flex justify-content-center align-items-center bg-light\">\n        <div className=\"text-danger\">\n          <h1 className=\"display-3\">Uh, oh!</h1>\n          <p>\n            An unexpected error occurred while connecting with Google. Please\n            try again later.\n          </p>\n        </div>\n      </div>\n    );\n  }\n  return (\n    <AuthProvider>\n      <Navbar isGapiClientLoaded={isGapiClientLoaded} />\n      {isGapiClientLoaded ? (\n        <Dashboard hours={create_hours({ sheetsApi })} />\n      ) : (\n        <Spinner />\n      )}\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n// import \"\"\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}