(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"85Qh":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return i}));var i=function(){function e(t){var n=t.sheetsApi;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sheetsApi=n,this._isHoursDataLoaded=!1}var t,n,i;return t=e,(n=[{key:"load",value:function(){var e=this;return this._sheetsApi.fetchHours().then((function(t){e._isHoursDataLoaded=!0,e._hoursData=t})).catch(console.error)}},{key:"isLoaded",value:function(){return this._isHoursDataLoaded}},{key:"totals",value:function(){var e=function(e){return e/36e5},t=this._hoursData.filter((function(e){return function(e){var t=new Date;t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t.setDate(t.getDate()-t.getDay());var n=new Date(t.getTime());return n.setDate(n.getDate()+6-t.getDay()),e>=t&&e<n}(e.startDateTime)})),n=e(t.reduce((function(e,t){return e+t.endDateTime.getTime()-t.startDateTime.getTime()}),0)),r=t.filter((function(e){return t=e.startDateTime,(n=new Date).getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate();var t,n}));return console.log({thisWeek:t,thisDay:r}),{currentWeek:{hours:n},currentDay:{hours:e(r.reduce((function(e,t){return e+t.endDateTime.getTime()-t.startDateTime.getTime()}),0))}}}}])&&r(t.prototype,n),i&&r(t,i),e}()},"FXl/":function(e,t,n){"use strict";(function(e){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return i}));var i=function(){function t(n){var r=n.onSheetSelected;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._onSheetSelected=r,this._selector="#list-group-sheets",e(this._selector).on("click","button",this.createHandleItemClick(r))}var n,i,a;return n=t,(i=[{key:"createHandleItemClick",value:function(t){return function(){e(event.target).hasClass("web-view-link")||t&&t(e(this).attr("data-id"))}}},{key:"show",value:function(){e(this._selector).fadeIn()}},{key:"hide",value:function(){var t=this;return new Promise((function(n,r){try{e(t._selector).fadeOut(400,n)}catch(e){r(e)}}))}},{key:"setSheets",value:function(t){e(this._selector).empty().append(t.map(this.createSheetButton))}},{key:"createSheetButton",value:function(t){var n=t.id,r=t.name,i=t.webViewLink,a=t.iconLink,o=e("<img>").attr({src:a,"aria-hidden":"true",class:"mr-2"}),s=e('<i class="fas fa-external-link-alt" aria-hidden="true"></i>'),u=e("<a>").attr({class:"web-view-link pl-2",href:i,"aria-label":"Open sheet in new tab",target:"_blank"}).append(s);return e("<button>").addClass("list-group-item list-group-item-action h6").append(o,r,u).attr({type:"button","data-id":n})}}])&&r(n.prototype,i),a&&r(n,a),t}()}).call(this,n("EVdn"))},b5Oa:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"fetchAllSheets",(function(){return c})),n.d(t,"setHoursSheet",(function(){return l})),n.d(t,"setHoursSheetId",(function(){return h})),n.d(t,"getHoursSheet",(function(){return f})),n.d(t,"getHoursSheetId",(function(){return d})),n.d(t,"isHoursSheetSet",(function(){return g})),n.d(t,"fetchHours",(function(){return v}));var a=window.gapi,o=[],s=function(){return new Date(parseInt(localStorage.getItem("hours-data-loaded-at")))},u=function(e){return localStorage.setItem("hours-data-loaded-at",e.getTime())},c=function(){return new Promise((function(e,t){a.client.drive.files.list({fields:"nextPageToken, files(id, name, webViewLink, iconLink)",q:'mimeType="application/vnd.google-apps.spreadsheet"'}).then((function(n){var r=n.result.files;if(!r||r.length<1)return t(new Error("No Google Sheets!"));o=r,e(r)}),t)}))},l=function(e){return localStorage.setItem("hours-sheet",JSON.stringify(o.find((function(t){return t.id===e}))))},h=function(e){return localStorage.setItem("hours-sheet",JSON.stringify(o.find((function(t){return t.id===e}))))},f=function(){return JSON.parse(localStorage.getItem("hours-sheet"))},d=function(){var e=f();return e&&e.id},g=function(){return!!f()},p=function(e){var t=86400*e-2209161600,n=new Date;return n.setTime(1e3*t),n.setMinutes(n.getTimezoneOffset()+n.getMinutes()),n},m=function(e){var t={};return t.timestamp=p(parseFloat(e[0])),t.startDateTime=p(parseFloat(e[1])+parseFloat(e[2])),t.endDateTime=p(parseFloat(e[1])+parseFloat(e[3])),t.notes=e[4].trim(),t},v=function(){return new Promise((function(e,t){if((new Date).getTime()-s().getTime()<6e4)e(JSON.parse(localStorage.getItem("hours-data")).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{timestamp:new Date(e.timestamp),startDateTime:new Date(e.startDateTime),endDateTime:new Date(e.endDateTime)})})));else{var n={spreadsheetId:d(),range:"A:E",valueRenderOption:"UNFORMATTED_VALUE",dateTimeRenderOption:"SERIAL_NUMBER"};a.client.sheets.spreadsheets.values.get(n).then((function(t){var n=t.result.values.slice(1).map(m);u(new Date),localStorage.setItem("hours-data",JSON.stringify(n)),e(n)}),t)}}))}},e6Wu:function(e,t,n){"use strict";n.r(t),function(e){n("SYky");var t,r,i=n("7O5W"),a=n("g0/r"),o=(n("hZTp"),n("kpFX")),s=n("b5Oa"),u=n("FXl/"),c=n("85Qh");i.b.add(a.faExternalLinkAlt),i.a.watch();var l=new c.a({sheetsApi:s});function h(e){g(),e&&s.isHoursSheetSet()&&!l.isLoaded()?l.load().then(g):e&&s.fetchAllSheets().then((function(e){return g({sheets:e})})).catch(console.error)}function f(){try{if(o.b())return void o.d();t.text("Loading..."),o.c()}catch(e){console.log(e)}}var d=function(e){s.setHoursSheetId(e),l.load(),g()},g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.sheets,a=o.b(),u=s.isHoursSheetSet(),c=l.isLoaded();if(e("#external-link-hours-sheet").attr({href:s.getHoursSheet().webViewLink}),a?t.text("Log Out").toggleClass(""):t.text("Sign In with Google"),a&&u?r.hide().then((function(){e("#external-link-hours-sheet").fadeIn()})):!u&&i?(r.setSheets(i),r.show()):a?(e("#external-link-hours-sheet").fadeOut(),r.show()):r.hide(),c){var h=l.totals(),f=h.currentDay,d=h.currentWeek;e("#totals").html("\n      <p>Hours Today: ".concat(f.hours.toFixed(2),"</p>\n      <p>Hours This Week: ").concat(d.hours.toFixed(2),"</p>\n    ")).fadeIn()}};e((function(){t=e("#button-login"),e("#button-select-sheet").on("click",(function(){})),t.text("Loading..."),t.on("click",f),o.a({onChange:h}),r=new u.a({onSheetSelected:d})}))}.call(this,n("EVdn"))},hZTp:function(e,t,n){},kpFX:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u}));var r=window.gapi,i=function(){if(!r.auth2)throw new Error("Google API Auth2 must be initialized.");return r.auth2},a=function(e){var t,n=e.onChange;r.load("client:auth2",(t={handleSignInStatusChange:n}.handleSignInStatusChange,function(){var e=console.error;r.client.init({clientId:"661549194387-755tit59r7uggmsctfsjkt25vhl2j1ua.apps.googleusercontent.com",GOOGLE_API_KEY:"AIzaSyDrOHTyZdBhmFNWdY_TX6Q5iADN0aKn1cw",scope:["https://www.googleapis.com/auth/spreadsheets.readonly","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4","https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}).then((function(){i().getAuthInstance().isSignedIn.listen(t),t(i().getAuthInstance().isSignedIn.get())}),e)}))},o=function(){return i().getAuthInstance().isSignedIn.get()},s=function(){i().getAuthInstance().signOut()},u=function(){i().getAuthInstance().signIn()}}},[["e6Wu",1,2]]]);